"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[973],{77388:function(e,t,a){a.d(t,{Z:function(){return p}});var s=a(57437),r=a(71245),n=a(99376),i=a(25466),c=a(56475),l=a(97418),o=a(32489),d=a(92369),u=a(47692),h=a(58293),g=a(46221),x=a(2265),m=a(69064);function p(e){let{children:t}=e,{user:a,logout:p}=(0,r.a)(),f=(0,n.useRouter)(),y=(0,n.usePathname)(),[b,w]=(0,x.useState)(!1),v=async()=>{try{await p(),f.replace("/login"),m.Am.success("Logged out successfully")}catch(e){console.error("Logout failed:",e),m.Am.error("Failed to logout")}},j=[{name:"Dashboard",href:"/dashboard",icon:i.Z,current:"/dashboard"===y},{name:"Projects",href:"/projects",icon:c.Z,current:"/projects"===y},{name:"Tasks",href:"/tasks",icon:l.Z,current:"/tasks"===y}];return a?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-indigo-950 to-gray-900 text-slate-100",children:[(0,s.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden ".concat(b?"block":"hidden"),children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60",onClick:()=>w(!1)}),(0,s.jsxs)("div",{className:"fixed inset-y-0 left-0 flex w-72 flex-col bg-gradient-to-br from-slate-900 via-indigo-950 to-gray-900 shadow-2xl rounded-r-3xl",children:[(0,s.jsxs)("div",{className:"flex h-20 items-center justify-between px-6 border-b border-slate-800/60",children:[(0,s.jsxs)("span",{className:"font-bold text-xl text-indigo-300 tracking-wide flex items-center gap-2",children:[(0,s.jsx)(i.Z,{className:"w-7 h-7 text-indigo-400"}),"MetaUpSpace"]}),(0,s.jsx)("button",{onClick:()=>w(!1),className:"text-slate-400 hover:text-indigo-300",children:(0,s.jsx)(o.Z,{className:"h-7 w-7"})})]}),(0,s.jsx)("nav",{className:"flex-1 space-y-2 px-4 py-6",children:j.map(e=>{let t=e.icon;return(0,s.jsxs)("a",{href:e.href,onClick:t=>{t.preventDefault(),f.push(e.href),w(!1)},className:"group flex items-center px-3 py-2 text-base font-semibold rounded-xl transition-all duration-200 ".concat(e.current?"bg-indigo-700/80 text-white shadow-lg":"text-slate-300 hover:bg-slate-800/80 hover:text-indigo-300"),children:[(0,s.jsx)(t,{className:"mr-3 h-6 w-6 flex-shrink-0 ".concat(e.current?"text-indigo-300":"text-slate-500 group-hover:text-indigo-300")}),e.name]},e.name)})}),(0,s.jsxs)("div",{className:"border-t border-slate-800/60 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-indigo-700 flex items-center justify-center shadow-lg",children:(0,s.jsxs)("span",{className:"text-base font-bold text-white",children:[a.firstName.charAt(0),a.lastName.charAt(0)]})})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsxs)("p",{className:"text-base font-semibold text-indigo-100",children:[a.firstName," ",a.lastName]}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:a.email})]})]}),(0,s.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,s.jsxs)("button",{onClick:()=>{f.push("/profile"),w(!1)},className:"group flex w-full items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,s.jsx)(d.Z,{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-500"}),"Profile"]}),(0,s.jsxs)("button",{onClick:v,className:"group flex w-full items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,s.jsx)(u.Z,{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-500"}),"Sign out"]})]})]})]})]}),(0,s.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-72 lg:flex-col",children:(0,s.jsxs)("div",{className:"flex flex-col flex-grow bg-gradient-to-br from-slate-900 via-indigo-950 to-gray-900 border-r border-slate-800/60 rounded-r-3xl",children:[(0,s.jsx)("div",{className:"flex h-20 items-center px-6 border-b border-slate-800/60",children:(0,s.jsxs)("span",{className:"font-bold text-xl text-indigo-300 tracking-wide flex items-center gap-2",children:[(0,s.jsx)(i.Z,{className:"w-7 h-7 text-indigo-400"}),"MetaUpSpace"]})}),(0,s.jsx)("nav",{className:"flex-1 space-y-2 px-4 py-6",children:j.map(e=>{let t=e.icon;return(0,s.jsxs)("a",{href:e.href,onClick:t=>{t.preventDefault(),f.push(e.href)},className:"group flex items-center px-3 py-2 text-base font-semibold rounded-xl transition-all duration-200 ".concat(e.current?"bg-indigo-700/80 text-white shadow-lg":"text-slate-300 hover:bg-slate-800/80 hover:text-indigo-300"),children:[(0,s.jsx)(t,{className:"mr-3 h-6 w-6 flex-shrink-0 ".concat(e.current?"text-indigo-300":"text-slate-500 group-hover:text-indigo-300")}),e.name]},e.name)})}),(0,s.jsxs)("div",{className:"border-t border-slate-800/60 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-indigo-700 flex items-center justify-center shadow-lg",children:(0,s.jsxs)("span",{className:"text-base font-bold text-white",children:[a.firstName.charAt(0),a.lastName.charAt(0)]})})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsxs)("p",{className:"text-base font-semibold text-indigo-100",children:[a.firstName," ",a.lastName]}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:a.email})]})]}),(0,s.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,s.jsxs)("button",{onClick:()=>f.push("/profile"),className:"group flex w-full items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,s.jsx)(d.Z,{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-500"}),"Profile"]}),(0,s.jsxs)("button",{onClick:v,className:"group flex w-full items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,s.jsx)(u.Z,{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-500"}),"Sign out"]})]})]})]})}),(0,s.jsxs)("div",{className:"lg:pl-72",children:[(0,s.jsx)("div",{className:"sticky top-0 z-40 lg:hidden",children:(0,s.jsxs)("div",{className:"flex h-20 items-center gap-x-4 border-b border-slate-800/60 bg-gradient-to-r from-slate-900 via-indigo-950 to-gray-900 px-6 shadow-lg sm:gap-x-6",children:[(0,s.jsx)("button",{type:"button",className:"-m-2.5 p-2.5 text-slate-300 lg:hidden",onClick:()=>w(!0),children:(0,s.jsx)(h.Z,{className:"h-7 w-7"})}),(0,s.jsx)("div",{className:"h-7 w-px bg-slate-700 lg:hidden"}),(0,s.jsxs)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6 items-center",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("span",{className:"font-bold text-xl text-indigo-300 tracking-wide flex items-center gap-2",children:[(0,s.jsx)(i.Z,{className:"w-7 h-7 text-indigo-400"}),"MetaUpSpace"]})}),(0,s.jsx)("div",{className:"flex-1 flex justify-center",children:(0,s.jsx)("input",{type:"text",placeholder:"Search...",className:"w-full max-w-xs px-4 py-2 rounded-xl border border-slate-700 bg-slate-900 text-slate-100 focus:outline-none focus:ring-2 focus:ring-indigo-800 shadow"})}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{className:"rounded-full bg-slate-800 p-2 hover:bg-indigo-900 transition",children:(0,s.jsx)(g.Z,{className:"w-5 h-5 text-slate-300"})}),(0,s.jsx)("button",{className:"rounded-full bg-slate-800 p-2 hover:bg-indigo-900 transition",children:(0,s.jsx)(d.Z,{className:"w-5 h-5 text-slate-300"})}),(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-indigo-700 flex items-center justify-center shadow-lg",children:(0,s.jsxs)("span",{className:"text-base font-bold text-white",children:[a.firstName.charAt(0),a.lastName.charAt(0)]})})]})]})]})}),(0,s.jsx)("main",{children:t})]})]}):(0,s.jsx)(s.Fragment,{children:t})}},71245:function(e,t,a){a.d(t,{AuthProvider:function(){return o},a:function(){return d}});var s=a(57437),r=a(2265),n=a(71837),i=a(69064),c=a(99376);let l=(0,r.createContext)(void 0),o=e=>{let{children:t}=e,[a,o]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0),h=(0,c.useRouter)();(0,r.useEffect)(()=>{(async()=>{try{if(n.Z.isAuthenticated()){var e;let t=await n.Z.getProfile();o((null===(e=t.data)||void 0===e?void 0:e.user)||null)}}catch(e){console.error("Auth check failed:",e),await n.Z.logout()}finally{u(!1)}})()},[]);let g=async e=>{try{let t=await n.Z.login(e);o(t.data.user),i.Am.success("Welcome back!"),h.push("/dashboard")}catch(s){var t,a;let e=(null===(a=s.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Login failed";throw i.Am.error(e),s}},x=async e=>{try{let t=await n.Z.register(e);o(t.data.user),i.Am.success("Account created successfully!"),h.push("/dashboard")}catch(s){var t,a;let e=(null===(a=s.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Registration failed";throw i.Am.error(e),s}},m=async()=>{try{await n.Z.logout(),o(null),i.Am.success("Logged out successfully"),h.push("/login")}catch(e){console.error("Logout error:",e),o(null),h.push("/login")}},p=async e=>{var t,a,s;try{let a=await n.Z.updateProfile(e);o((null===(t=a.data)||void 0===t?void 0:t.user)||null),i.Am.success("Profile updated successfully")}catch(t){let e=(null===(s=t.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Profile update failed";throw i.Am.error(e),t}};return(0,s.jsx)(l.Provider,{value:{user:a,loading:d,login:g,register:x,logout:m,updateUser:p,isAuthenticated:!!a},children:t})},d=()=>{let e=(0,r.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},71837:function(e,t,a){var s=a(83464),r=a(64131),n=a(69064);class i{async getUsers(){return(await this.client.get("/users")).data}setTokens(e,t){this.accessToken=e,r.Z.set("accessToken",e,{expires:7,secure:!0,sameSite:"strict"}),r.Z.set("refreshToken",t,{expires:30,secure:!0,sameSite:"strict"})}clearTokens(){this.accessToken=null,r.Z.remove("accessToken"),r.Z.remove("refreshToken")}async login(e){let t=await this.client.post("/auth/login",e),{accessToken:a,refreshToken:s}=t.data.data;return this.setTokens(a,s),t.data}async register(e){let t=await this.client.post("/auth/register",e),{accessToken:a,refreshToken:s}=t.data.data;return this.setTokens(a,s),t.data}async refreshToken(e){return(await this.client.post("/auth/refresh",{refreshToken:e})).data}async logout(){try{await this.client.post("/auth/logout")}catch(e){}finally{this.clearTokens()}}async getProfile(){return(await this.client.get("/auth/profile")).data}async updateProfile(e){return(await this.client.put("/auth/profile",e)).data}async changePassword(e){return(await this.client.put("/auth/change-password",e)).data}async getProjects(e){let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,s]=e;null!=s&&t.append(a,String(s))}),(await this.client.get("/projects?".concat(t))).data}async getProject(e){return(await this.client.get("/projects/".concat(e))).data}async createProject(e){return(await this.client.post("/projects",e)).data}async updateProject(e,t){return(await this.client.put("/projects/".concat(e),t)).data}async deleteProject(e){return(await this.client.delete("/projects/".concat(e))).data}async getProjectStats(e){return(await this.client.get("/projects/".concat(e,"/stats"))).data}async getTasks(e){let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,s]=e;null!=s&&t.append(a,String(s))}),(await this.client.get("/tasks?".concat(t))).data}async getTask(e){return(await this.client.get("/tasks/".concat(e))).data}async createTask(e){return(await this.client.post("/tasks",e)).data}async updateTask(e,t){return(await this.client.put("/tasks/".concat(e),t)).data}async deleteTask(e){return(await this.client.delete("/tasks/".concat(e))).data}async addTaskComment(e,t){return(await this.client.post("/tasks/".concat(e,"/comments"),{comment:t})).data}async getMyTasks(e){let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,s]=e;null!=s&&t.append(a,String(s))}),(await this.client.get("/tasks/my-tasks?".concat(t))).data}async getDashboardAnalytics(){return(await this.client.get("/analytics/dashboard")).data}async getProjectAnalytics(e,t){let a=new URLSearchParams;return e&&a.append("startDate",e),t&&a.append("endDate",t),(await this.client.get("/analytics/projects?".concat(a))).data}async getTeamAnalytics(e,t){let a=new URLSearchParams;return e&&a.append("startDate",e),t&&a.append("endDate",t),(await this.client.get("/analytics/team?".concat(a))).data}isAuthenticated(){return!!this.accessToken}getAccessToken(){return this.accessToken}constructor(){this.accessToken=null;let e="http://localhost:5000/api".replace(/\/$/,"");console.log("\uD83D\uDD17 API Base URL:","".concat(e,"/api")),this.client=s.Z.create({baseURL:"".concat(e,"/api"),timeout:1e4,headers:{"Content-Type":"application/json"}}),this.accessToken=r.Z.get("accessToken")||null,this.client.interceptors.request.use(e=>(this.accessToken&&(e.headers.Authorization="Bearer ".concat(this.accessToken)),e),e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,async e=>{var t,a,s,i;let c=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!c._retry){c._retry=!0;try{let e=r.Z.get("refreshToken");if(e){let t=await this.refreshToken(e);return this.setTokens(t.data.accessToken,t.data.refreshToken),this.client(c)}}catch(e){this.logout(),window.location.href="/login"}}if((null===(a=e.response)||void 0===a?void 0:a.status)!==401){let t=(null===(i=e.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"An error occurred";n.Am.error(t)}return Promise.reject(e)})}}let c=new i;t.Z=c},93448:function(e,t,a){function s(e,t){return("string"==typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",...t})}function r(e){return e.split("_").map(e=>{var t;return(t=e.toLowerCase()).charAt(0).toUpperCase()+t.slice(1)}).join(" ")}function n(e){switch(e.toLowerCase()){case"low":return"text-green-600 bg-green-50 border-green-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"high":return"text-orange-600 bg-orange-50 border-orange-200";case"critical":case"urgent":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}}function i(e){switch(e.toLowerCase()){case"planning":case"todo":default:return"text-gray-600 bg-gray-50 border-gray-200";case"in_progress":return"text-blue-600 bg-blue-50 border-blue-200";case"review":case"testing":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"completed":return"text-green-600 bg-green-50 border-green-200";case"on_hold":case"blocked":return"text-orange-600 bg-orange-50 border-orange-200";case"cancelled":return"text-red-600 bg-red-50 border-red-200"}}a.d(t,{_$:function(){return n},p6:function(){return s},uV:function(){return r},z2:function(){return i}})}}]);