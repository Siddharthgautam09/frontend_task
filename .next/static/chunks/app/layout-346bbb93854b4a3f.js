(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{16202:function(e,t,a){Promise.resolve().then(a.t.bind(a,14811,23)),Promise.resolve().then(a.bind(a,69064)),Promise.resolve().then(a.t.bind(a,2778,23)),Promise.resolve().then(a.bind(a,93285)),Promise.resolve().then(a.bind(a,71245))},93285:function(e,t,a){"use strict";var s=a(57437),r=a(2265);class n extends r.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,s.jsx)("div",{className:"min-h-screen bg-secondary-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-red-100 mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-center text-primary-900 mb-2",children:"Something went wrong"}),(0,s.jsx)("p",{className:"text-secondary-600 text-center mb-4",children:"We're sorry for the inconvenience. Please try refreshing the page."}),this.state.error&&!1,(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Refresh Page"})]})}):this.props.children}constructor(e){super(e),this.state={hasError:!1}}}t.default=n},71245:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return l},a:function(){return u}});var s=a(57437),r=a(2265),n=a(71837),c=a(69064),i=a(99376);let o=(0,r.createContext)(void 0),l=e=>{let{children:t}=e,[a,l]=(0,r.useState)(null),[u,d]=(0,r.useState)(!0),h=(0,i.useRouter)();(0,r.useEffect)(()=>{(async()=>{try{if(n.Z.isAuthenticated()){var e;let t=await n.Z.getProfile();l((null===(e=t.data)||void 0===e?void 0:e.user)||null)}}catch(e){console.error("Auth check failed:",e),await n.Z.logout()}finally{d(!1)}})()},[]);let p=async e=>{try{let t=await n.Z.login(e);l(t.data.user),c.Am.success("Welcome back!"),h.push("/dashboard")}catch(s){var t,a;let e=(null===(a=s.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Login failed";throw c.Am.error(e),s}},g=async e=>{try{let t=await n.Z.register(e);l(t.data.user),c.Am.success("Account created successfully!"),h.push("/dashboard")}catch(s){var t,a;let e=(null===(a=s.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Registration failed";throw c.Am.error(e),s}},f=async()=>{try{await n.Z.logout(),l(null),c.Am.success("Logged out successfully"),h.push("/login")}catch(e){console.error("Logout error:",e),l(null),h.push("/login")}},m=async e=>{var t,a,s;try{let a=await n.Z.updateProfile(e);l((null===(t=a.data)||void 0===t?void 0:t.user)||null),c.Am.success("Profile updated successfully")}catch(t){let e=(null===(s=t.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Profile update failed";throw c.Am.error(e),t}};return(0,s.jsx)(o.Provider,{value:{user:a,loading:u,login:p,register:g,logout:f,updateUser:m,isAuthenticated:!!a},children:t})},u=()=>{let e=(0,r.useContext)(o);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},71837:function(e,t,a){"use strict";var s=a(83464),r=a(64131),n=a(69064);class c{async getUsers(){return(await this.client.get("/users")).data}setTokens(e,t){this.accessToken=e,r.Z.set("accessToken",e,{expires:7,secure:!0,sameSite:"strict"}),r.Z.set("refreshToken",t,{expires:30,secure:!0,sameSite:"strict"})}clearTokens(){this.accessToken=null,r.Z.remove("accessToken"),r.Z.remove("refreshToken")}async login(e){let t=await this.client.post("/auth/login",e),{accessToken:a,refreshToken:s}=t.data.data;return this.setTokens(a,s),t.data}async register(e){let t=await this.client.post("/auth/register",e),{accessToken:a,refreshToken:s}=t.data.data;return this.setTokens(a,s),t.data}async refreshToken(e){return(await this.client.post("/auth/refresh",{refreshToken:e})).data}async logout(){try{await this.client.post("/auth/logout")}catch(e){}finally{this.clearTokens()}}async getProfile(){return(await this.client.get("/auth/profile")).data}async updateProfile(e){return(await this.client.put("/auth/profile",e)).data}async changePassword(e){return(await this.client.put("/auth/change-password",e)).data}async getProjects(e){let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,s]=e;null!=s&&t.append(a,String(s))}),(await this.client.get("/projects?".concat(t))).data}async getProject(e){return(await this.client.get("/projects/".concat(e))).data}async createProject(e){return(await this.client.post("/projects",e)).data}async updateProject(e,t){return(await this.client.put("/projects/".concat(e),t)).data}async deleteProject(e){return(await this.client.delete("/projects/".concat(e))).data}async getProjectStats(e){return(await this.client.get("/projects/".concat(e,"/stats"))).data}async getTasks(e){let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,s]=e;null!=s&&t.append(a,String(s))}),(await this.client.get("/tasks?".concat(t))).data}async getTask(e){return(await this.client.get("/tasks/".concat(e))).data}async createTask(e){return(await this.client.post("/tasks",e)).data}async updateTask(e,t){return(await this.client.put("/tasks/".concat(e),t)).data}async deleteTask(e){return(await this.client.delete("/tasks/".concat(e))).data}async addTaskComment(e,t){return(await this.client.post("/tasks/".concat(e,"/comments"),{comment:t})).data}async getMyTasks(e){let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,s]=e;null!=s&&t.append(a,String(s))}),(await this.client.get("/tasks/my-tasks?".concat(t))).data}async getDashboardAnalytics(){return(await this.client.get("/analytics/dashboard")).data}async getProjectAnalytics(e,t){let a=new URLSearchParams;return e&&a.append("startDate",e),t&&a.append("endDate",t),(await this.client.get("/analytics/projects?".concat(a))).data}async getTeamAnalytics(e,t){let a=new URLSearchParams;return e&&a.append("startDate",e),t&&a.append("endDate",t),(await this.client.get("/analytics/team?".concat(a))).data}isAuthenticated(){return!!this.accessToken}getAccessToken(){return this.accessToken}constructor(){this.accessToken=null;let e="http://localhost:5000/api".replace(/\/$/,"");console.log("\uD83D\uDD17 API Base URL:","".concat(e,"/api")),this.client=s.Z.create({baseURL:"".concat(e,"/api"),timeout:1e4,headers:{"Content-Type":"application/json"}}),this.accessToken=r.Z.get("accessToken")||null,this.client.interceptors.request.use(e=>(this.accessToken&&(e.headers.Authorization="Bearer ".concat(this.accessToken)),e),e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,async e=>{var t,a,s,c;let i=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!i._retry){i._retry=!0;try{let e=r.Z.get("refreshToken");if(e){let t=await this.refreshToken(e);return this.setTokens(t.data.accessToken,t.data.refreshToken),this.client(i)}}catch(e){this.logout(),window.location.href="/login"}}if((null===(a=e.response)||void 0===a?void 0:a.status)!==401){let t=(null===(c=e.response)||void 0===c?void 0:null===(s=c.data)||void 0===s?void 0:s.message)||"An error occurred";n.Am.error(t)}return Promise.reject(e)})}}let i=new c;t.Z=i},2778:function(){},14811:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[2,610,971,117,744],function(){return e(e.s=16202)}),_N_E=e.O()}]);