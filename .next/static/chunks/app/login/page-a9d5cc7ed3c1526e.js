(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{2387:function(e,t,a){Promise.resolve().then(a.bind(a,219))},39763:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var s=a(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let a=(0,s.forwardRef)((a,i)=>{let{color:c="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:u="",children:h,...m}=a;return(0,s.createElement)("svg",{ref:i,...r,width:l,height:l,stroke:c,strokeWidth:d?24*Number(o)/Number(l):o,className:["lucide","lucide-".concat(n(e)),u].join(" "),...m},[...t.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(h)?h:[h]])});return a.displayName="".concat(e),a}},219:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var s=a(57437),r=a(2265),n=a(71245),i=a(99376),c=a(69064),l=a(39763);let o=(0,l.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),d=(0,l.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),u=(0,l.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),h=(0,l.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),m=(0,l.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function p(){let{user:e,login:t,loading:a}=(0,n.a)(),l=(0,i.useRouter)(),[p,y]=(0,r.useState)(!1),[f,g]=(0,r.useState)({email:"",password:""}),[w,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{!a&&e&&l.replace("/dashboard")},[e,a,l]);let v=async e=>{if(e.preventDefault(),!w){x(!0);try{await t({email:f.email,password:f.password}),c.Am.success("Login successful!"),l.replace("/dashboard")}catch(e){c.Am.error(e.message||"Authentication failed")}finally{x(!1)}}},k=e=>{g({...f,[e.target.name]:e.target.value})};return a?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e?null:(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-secondary-100 to-primary-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("div",{className:"w-14 h-14 bg-primary-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,s.jsx)(o,{className:"w-7 h-7 text-white"})})}),(0,s.jsx)("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-primary-900",children:"Sign in to your account"}),(0,s.jsx)("p",{className:"mt-2 text-center text-sm text-secondary-600",children:"Enterprise Task Management System"})]}),(0,s.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,s.jsxs)("div",{className:"bg-white py-8 px-4 shadow-xl sm:rounded-xl sm:px-10 border border-secondary-200",children:[(0,s.jsxs)("form",{className:"space-y-6",onSubmit:v,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-primary-900",children:"Email address"}),(0,s.jsxs)("div",{className:"mt-2 relative",children:[(0,s.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:f.email,onChange:k,className:"block w-full rounded-lg border border-secondary-300 py-2 pl-10 text-primary-900 shadow-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 placeholder:text-secondary-400 sm:text-sm sm:leading-6",placeholder:"you@example.com"}),(0,s.jsx)(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-secondary-400"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-primary-900",children:"Password"}),(0,s.jsxs)("div",{className:"mt-2 relative",children:[(0,s.jsx)("input",{id:"password",name:"password",type:p?"text":"password",autoComplete:"current-password",required:!0,value:f.password,onChange:k,className:"block w-full rounded-lg border border-secondary-300 py-2 pl-10 pr-10 text-primary-900 shadow-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 placeholder:text-secondary-400 sm:text-sm sm:leading-6",placeholder:"••••••••"}),(0,s.jsx)(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-secondary-400"}),(0,s.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>y(!p),children:p?(0,s.jsx)(h,{className:"h-5 w-5 text-secondary-400 hover:text-primary-600"}):(0,s.jsx)(m,{className:"h-5 w-5 text-secondary-400 hover:text-primary-600"})})]})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:w,className:"btn-primary w-full py-2 text-sm font-semibold leading-6",children:w?"Please wait...":"Sign in"})})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-secondary-200"})})})})]})})]})}},71245:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return o},a:function(){return d}});var s=a(57437),r=a(2265),n=a(71837),i=a(69064),c=a(99376);let l=(0,r.createContext)(void 0),o=e=>{let{children:t}=e,[a,o]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0),h=(0,c.useRouter)();(0,r.useEffect)(()=>{(async()=>{try{if(n.Z.isAuthenticated()){var e;let t=await n.Z.getProfile();o((null===(e=t.data)||void 0===e?void 0:e.user)||null)}}catch(e){console.error("Auth check failed:",e),await n.Z.logout()}finally{u(!1)}})()},[]);let m=async e=>{try{let t=await n.Z.login(e);o(t.data.user),i.Am.success("Welcome back!"),h.push("/dashboard")}catch(s){var t,a;let e=(null===(a=s.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Login failed";throw i.Am.error(e),s}},p=async e=>{try{let t=await n.Z.register(e);o(t.data.user),i.Am.success("Account created successfully!"),h.push("/dashboard")}catch(s){var t,a;let e=(null===(a=s.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Registration failed";throw i.Am.error(e),s}},y=async()=>{try{await n.Z.logout(),o(null),i.Am.success("Logged out successfully"),h.push("/login")}catch(e){console.error("Logout error:",e),o(null),h.push("/login")}},f=async e=>{var t,a,s;try{let a=await n.Z.updateProfile(e);o((null===(t=a.data)||void 0===t?void 0:t.user)||null),i.Am.success("Profile updated successfully")}catch(t){let e=(null===(s=t.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Profile update failed";throw i.Am.error(e),t}};return(0,s.jsx)(l.Provider,{value:{user:a,loading:d,login:m,register:p,logout:y,updateUser:f,isAuthenticated:!!a},children:t})},d=()=>{let e=(0,r.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},71837:function(e,t,a){"use strict";var s=a(83464),r=a(64131),n=a(69064);class i{async getUsers(){return(await this.client.get("/users")).data}setTokens(e,t){this.accessToken=e,r.Z.set("accessToken",e,{expires:7,secure:!0,sameSite:"strict"}),r.Z.set("refreshToken",t,{expires:30,secure:!0,sameSite:"strict"})}clearTokens(){this.accessToken=null,r.Z.remove("accessToken"),r.Z.remove("refreshToken")}async login(e){let t=await this.client.post("/auth/login",e),{accessToken:a,refreshToken:s}=t.data.data;return this.setTokens(a,s),t.data}async register(e){let t=await this.client.post("/auth/register",e),{accessToken:a,refreshToken:s}=t.data.data;return this.setTokens(a,s),t.data}async refreshToken(e){return(await this.client.post("/auth/refresh",{refreshToken:e})).data}async logout(){try{await this.client.post("/auth/logout")}catch(e){}finally{this.clearTokens()}}async getProfile(){return(await this.client.get("/auth/profile")).data}async updateProfile(e){return(await this.client.put("/auth/profile",e)).data}async changePassword(e){return(await this.client.put("/auth/change-password",e)).data}async getProjects(e){let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,s]=e;null!=s&&t.append(a,String(s))}),(await this.client.get("/projects?".concat(t))).data}async getProject(e){return(await this.client.get("/projects/".concat(e))).data}async createProject(e){return(await this.client.post("/projects",e)).data}async updateProject(e,t){return(await this.client.put("/projects/".concat(e),t)).data}async deleteProject(e){return(await this.client.delete("/projects/".concat(e))).data}async getProjectStats(e){return(await this.client.get("/projects/".concat(e,"/stats"))).data}async getTasks(e){let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,s]=e;null!=s&&t.append(a,String(s))}),(await this.client.get("/tasks?".concat(t))).data}async getTask(e){return(await this.client.get("/tasks/".concat(e))).data}async createTask(e){return(await this.client.post("/tasks",e)).data}async updateTask(e,t){return(await this.client.put("/tasks/".concat(e),t)).data}async deleteTask(e){return(await this.client.delete("/tasks/".concat(e))).data}async addTaskComment(e,t){return(await this.client.post("/tasks/".concat(e,"/comments"),{comment:t})).data}async getMyTasks(e){let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,s]=e;null!=s&&t.append(a,String(s))}),(await this.client.get("/tasks/my-tasks?".concat(t))).data}async getDashboardAnalytics(){return(await this.client.get("/analytics/dashboard")).data}async getProjectAnalytics(e,t){let a=new URLSearchParams;return e&&a.append("startDate",e),t&&a.append("endDate",t),(await this.client.get("/analytics/projects?".concat(a))).data}async getTeamAnalytics(e,t){let a=new URLSearchParams;return e&&a.append("startDate",e),t&&a.append("endDate",t),(await this.client.get("/analytics/team?".concat(a))).data}isAuthenticated(){return!!this.accessToken}getAccessToken(){return this.accessToken}constructor(){this.accessToken=null;let e="http://localhost:5000/api".replace(/\/$/,"");console.log("\uD83D\uDD17 API Base URL:","".concat(e,"/api")),this.client=s.Z.create({baseURL:"".concat(e,"/api"),timeout:1e4,headers:{"Content-Type":"application/json"}}),this.accessToken=r.Z.get("accessToken")||null,this.client.interceptors.request.use(e=>(this.accessToken&&(e.headers.Authorization="Bearer ".concat(this.accessToken)),e),e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,async e=>{var t,a,s,i;let c=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!c._retry){c._retry=!0;try{let e=r.Z.get("refreshToken");if(e){let t=await this.refreshToken(e);return this.setTokens(t.data.accessToken,t.data.refreshToken),this.client(c)}}catch(e){this.logout(),window.location.href="/login"}}if((null===(a=e.response)||void 0===a?void 0:a.status)!==401){let t=(null===(i=e.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"An error occurred";n.Am.error(t)}return Promise.reject(e)})}}let c=new i;t.Z=c}},function(e){e.O(0,[610,971,117,744],function(){return e(e.s=2387)}),_N_E=e.O()}]);