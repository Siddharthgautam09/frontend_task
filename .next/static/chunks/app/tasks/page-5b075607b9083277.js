(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{27970:function(e,t,s){Promise.resolve().then(s.bind(s,15375))},39763:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var r=s(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let s=(0,r.forwardRef)((s,i)=>{let{color:n="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:x="",children:u,...m}=s;return(0,r.createElement)("svg",{ref:i,...a,width:o,height:o,stroke:n,strokeWidth:c?24*Number(d)/Number(o):d,className:["lucide","lucide-".concat(l(e)),x].join(" "),...m},[...t.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(u)?u:[u]])});return s.displayName="".concat(e),s}},22252:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},46221:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},31047:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},97418:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]])},90740:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},56475:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]])},25466:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},47692:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},58293:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},99397:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},73247:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},18930:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},92369:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},32489:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},15375:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var r=s(57437),a=s(2265),l=s(71245),i=s(99376),n=s(6481),o=s(71837),d=s(93448),c=s(69064),x=s(99397),u=s(73247),m=s(90740),g=s(39763);let h=(0,g.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var p=s(32489);let b=(0,g.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var y=s(22252),f=s(31047),j=s(18930),v=s(77388);function N(){let[e,t]=(0,a.useState)(null),[s,n]=(0,a.useState)(!1),[d,g]=(0,a.useState)(!1),y=()=>{g(!1),t(null)},{user:f,loading:j}=(0,l.a)(),N=(0,i.useRouter)(),[_,S]=(0,a.useState)([]),[D,M]=(0,a.useState)([]),[I,A]=(0,a.useState)(!0),[E,P]=(0,a.useState)(""),[L,O]=(0,a.useState)(""),[B,R]=(0,a.useState)(""),[H,F]=(0,a.useState)(""),[U,V]=(0,a.useState)(!1),[z,q]=(0,a.useState)("list"),[G,W]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!j&&!f){N.replace("/login");return}f&&($(),J())},[f,j,N]);let Y=e=>{if(!f)return!1;if("admin"===f.role)return!0;if("team_member"===f.role){var t;if(("string"==typeof e.assignedTo?e.assignedTo:null===(t=e.assignedTo)||void 0===t?void 0:t._id)===f._id)return!0;let s=D.find(t=>{var s;return t._id===("string"==typeof e.projectId?e.projectId:null===(s=e.projectId)||void 0===s?void 0:s._id)});if(s)return(Array.isArray(s.teamMembers)?s.teamMembers.map(e=>"string"==typeof e?e:e._id):[]).includes(f._id)}return!1},$=async()=>{try{A(!0);let e={};E&&(e.search=E),L&&(e.status=L),B&&(e.priority=B),H&&(e.projectId=H);let t=await o.Z.getTasks(e);if(t.success&&t.data){let e=t.data.tasks||t.data.items||[];S(e)}else S([])}catch(e){console.error(e),c.Am.error("Failed to load tasks"),S([])}finally{A(!1)}},J=async()=>{try{let e=await o.Z.getProjects({});if(e.success&&e.data){let t=e.data.projects||e.data.items||[];M(t)}else M([])}catch(e){console.error(e),M([])}},K=async e=>{if(confirm("Are you sure you want to delete this task?"))try{await o.Z.deleteTask(e),c.Am.success("Task deleted successfully"),$()}catch(e){console.error(e),c.Am.error("Failed to delete task")}},X=async(e,t)=>{try{console.log("Updating task ".concat(e," to status: ").concat(t));let s=await o.Z.updateTask(e,{status:t});console.log("Update response:",s),c.Am.success("Task status updated"),$()}catch(e){console.error("Task update error:",e),c.Am.error("Failed to update task status")}},Q=_.filter(e=>{if(!Y(e))return!1;let t=e.title.toLowerCase().includes(E.toLowerCase())||e.description.toLowerCase().includes(E.toLowerCase()),s=!L||e.status===L,r=!B||e.priority===B,a=!H||("object"==typeof e.projectId?e.projectId._id===H:e.projectId===H);return t&&s&&r&&a}),ee=e=>new Date(e)<new Date&&!["completed","cancelled"].includes(L),et=[L,B,H].filter(Boolean).length;if(j||I)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-3 border-blue-600 border-t-transparent"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Loading tasks..."})]})});if(!f)return null;let es={total:Q.length,completed:Q.filter(e=>"completed"===e.status).length,inProgress:Q.filter(e=>"in_progress"===e.status).length,overdue:Q.filter(e=>ee(e.dueDate)).length};return(0,r.jsx)(v.Z,{children:(0,r.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 via-indigo-950 to-gray-900 min-h-screen",children:[(0,r.jsx)("header",{className:"bg-gradient-to-r from-slate-900 via-indigo-950 to-gray-900 shadow-lg border-b border-slate-800/60",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex flex-col gap-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{children:(0,r.jsx)("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-purple-400 to-blue-400 drop-shadow-lg tracking-tight",children:"Tasks"})}),(null==f?void 0:f.role)==="admin"&&(0,r.jsxs)("button",{onClick:()=>V(!0),className:"bg-blue-600 text-white px-5 py-2.5 rounded-lg hover:bg-blue-700 transition-all duration-200 flex items-center gap-2 shadow-sm hover:shadow-md font-medium",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"New Task"})]})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,r.jsx)("p",{className:"text-2xl text-slate-200 mt-1 mb-2",children:"Manage and track your work"}),(0,r.jsxs)("div",{className:"flex gap-6 mt-4 mb-8",children:[(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200 flex-1",children:[(0,r.jsx)("div",{className:"text-xs font-medium text-blue-700 uppercase tracking-wide",children:"Total Tasks"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-900 mt-1",children:es.total})]}),(0,r.jsxs)("div",{className:"bg-emerald-50 rounded-lg p-3 border border-emerald-200 flex-1",children:[(0,r.jsx)("div",{className:"text-xs font-medium text-emerald-700 uppercase tracking-wide",children:"Completed"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-emerald-900 mt-1",children:es.completed})]}),(0,r.jsxs)("div",{className:"bg-amber-50 rounded-lg p-3 border border-amber-200 flex-1",children:[(0,r.jsx)("div",{className:"text-xs font-medium text-amber-700 uppercase tracking-wide",children:"In Progress"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-amber-900 mt-1",children:es.inProgress})]}),(0,r.jsxs)("div",{className:"bg-rose-50 rounded-lg p-3 border border-rose-200 flex-1",children:[(0,r.jsx)("div",{className:"text-xs font-medium text-rose-700 uppercase tracking-wide",children:"Overdue"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-rose-900 mt-1",children:es.overdue})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)(u.Z,{className:"absolute left-3.5 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,r.jsx)("input",{type:"text",placeholder:"Search tasks by title or description...",value:E,onChange:e=>P(e.target.value),className:"pl-11 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full text-sm transition-all"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("button",{onClick:()=>W(!G),className:"flex items-center gap-2 px-4 py-2.5 border rounded-lg text-sm font-medium transition-all ".concat(G||et>0?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"),children:[(0,r.jsx)(m.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Filters"}),et>0&&(0,r.jsx)("span",{className:"bg-blue-600 text-white text-xs px-1.5 py-0.5 rounded-full",children:et})]}),(0,r.jsx)("button",{onClick:$,className:"p-2.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 border border-gray-300 rounded-lg transition-all",title:"Refresh",children:(0,r.jsx)(h,{className:"w-4 h-4"})})]})]}),G&&(0,r.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,r.jsxs)("select",{value:B,onChange:e=>R(e.target.value),className:"px-4 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-800 font-semibold placeholder-gray-500",style:{minWidth:140},children:[(0,r.jsx)("option",{value:"",className:"text-gray-700 font-semibold",children:"All Priority"}),(0,r.jsx)("option",{value:"low",children:"Low"}),(0,r.jsx)("option",{value:"medium",children:"Medium"}),(0,r.jsx)("option",{value:"high",children:"High"}),(0,r.jsx)("option",{value:"urgent",children:"Urgent"})]}),(0,r.jsxs)("select",{value:H,onChange:e=>F(e.target.value),className:"px-4 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm bg-white text-gray-800 font-semibold placeholder-gray-500",style:{minWidth:140},children:[(0,r.jsx)("option",{value:"",className:"text-gray-700 font-semibold",children:"All Projects"}),(D||[]).map(e=>(0,r.jsx)("option",{value:e._id,children:e.title},e._id))]}),et>0&&(0,r.jsxs)("button",{onClick:()=>{O(""),R(""),F("")},className:"flex items-center gap-1.5 px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Clear filters"})]})]})})]}),0===Q.length?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center border border-gray-200",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(b,{className:"w-8 h-8 text-gray-400"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tasks found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:(null==f?void 0:f.role)==="admin"?"Get started by creating your first task or adjust your filters to see existing tasks.":"No tasks assigned to you yet. Please wait for an admin to assign tasks."}),(null==f?void 0:f.role)==="admin"&&(0,r.jsx)("button",{onClick:()=>V(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"+ Create Your First Task"})]}):"list"===z?(0,r.jsx)(w,{tasks:Q,isOverdue:ee,updateTaskStatus:X,handleDeleteTask:K,router:N,setShowCreateModal:V,canEditTask:e=>{if(!f)return!1;if("admin"===f.role)return!0;if("team_member"===f.role){var t,s;let r="string"==typeof e.assignedTo?e.assignedTo:null===(t=e.assignedTo)||void 0===t?void 0:t._id,a="string"==typeof e.createdBy?e.createdBy:null===(s=e.createdBy)||void 0===s?void 0:s._id;if(r===f._id||a===f._id)return!0;let l=D.find(t=>{var s;return t._id===("string"==typeof e.projectId?e.projectId:null===(s=e.projectId)||void 0===s?void 0:s._id)});if(l)return(Array.isArray(l.teamMembers)?l.teamMembers.map(e=>"string"==typeof e?e:e._id):[]).includes(f._id)}return!1},canDeleteTask:e=>!!f&&"admin"===f.role,openDetailsModal:e=>{t(e),n(!0)},openEditModal:e=>{t(e),g(!0)}}):(0,r.jsx)(k,{columns:[{status:"todo",title:"To Do",color:"bg-slate-50 border-slate-200",count:0},{status:"in_progress",title:"In Progress",color:"bg-blue-50 border-blue-200",count:0},{status:"review",title:"In Review",color:"bg-amber-50 border-amber-200",count:0},{status:"testing",title:"Testing",color:"bg-purple-50 border-purple-200",count:0},{status:"completed",title:"Completed",color:"bg-emerald-50 border-emerald-200",count:0},{status:"blocked",title:"Blocked",color:"bg-rose-50 border-rose-200",count:0}],tasks:Q,isOverdue:ee,updateTaskStatus:X,router:N}),(null==f?void 0:f.role)==="admin"&&U&&(0,r.jsx)(C,{onClose:()=>V(!1),onSuccess:()=>{V(!1),$()},projects:D}),s&&e&&(0,r.jsx)(T,{task:e,onClose:()=>{n(!1),t(null)}}),d&&e&&(0,r.jsx)(Z,{task:e,onClose:y,onSuccess:()=>{y(),$()},projects:D})]})]})})}function w(e){let{tasks:t,isOverdue:s,updateTaskStatus:l,handleDeleteTask:i,router:n,setShowCreateModal:o,canEditTask:c,canDeleteTask:u,openDetailsModal:m,openEditModal:g}=e,[h,p]=(0,a.useState)(null);return t.length?(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-3",children:(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-4 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:[(0,r.jsx)("div",{className:"col-span-5",children:"Task"}),(0,r.jsx)("div",{className:"col-span-2",children:"Status"}),(0,r.jsx)("div",{className:"col-span-2",children:"Priority"}),(0,r.jsx)("div",{className:"col-span-2",children:"Due Date"}),(0,r.jsx)("div",{className:"col-span-1 text-right",children:"Actions"})]})}),(0,r.jsx)("div",{className:"divide-y divide-gray-100",children:t.map(e=>(0,r.jsx)("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors group cursor-pointer",onClick:()=>n.push("/tasks/".concat(e._id)),children:(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,r.jsx)("div",{className:"col-span-5",children:(0,r.jsx)("div",{className:"flex items-start gap-3",children:(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900 truncate group-hover:text-blue-600 transition-colors",children:e.title}),s(e.dueDate)&&(0,r.jsxs)("span",{className:"flex items-center gap-1 text-xs text-rose-600 font-medium",children:[(0,r.jsx)(y.Z,{className:"w-3.5 h-3.5"}),"Overdue"]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 line-clamp-1",children:e.description})]})})}),(0,r.jsxs)("div",{className:"col-span-4 flex items-center gap-3",children:[c(e)?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:e.status,onChange:t=>{t.stopPropagation(),l(e._id,t.target.value)},onClick:e=>e.stopPropagation(),className:"text-xs font-semibold px-3 pr-8 py-1.5 rounded-full border-2 focus:ring-2 focus:ring-blue-500 transition-all appearance-none ".concat((0,d.z2)(e.status)),title:"Update task status",style:{minWidth:110},children:[(0,r.jsx)("option",{value:"todo",children:"To Do"}),(0,r.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,r.jsx)("option",{value:"review",children:"In Review"}),(0,r.jsx)("option",{value:"testing",children:"Testing"}),(0,r.jsx)("option",{value:"completed",children:"Completed"}),(0,r.jsx)("option",{value:"blocked",children:"Blocked"})]}),(0,r.jsx)("svg",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{d:"M7 8l3 3 3-3"})})]}):(0,r.jsx)("span",{className:"text-xs font-semibold px-3 py-1.5 rounded-full ".concat((0,d.z2)(e.status)),children:(0,d.uV)(e.status)}),(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-bold ".concat((0,d._$)(e.priority)," text-gray-800 ml-1"),children:(0,d.uV)(e.priority)})]}),(0,r.jsx)("div",{className:"col-span-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 text-gray-400"}),(0,r.jsx)("span",{className:s(e.dueDate)?"text-rose-600 font-semibold":"text-gray-700",children:(0,d.p6)(e.dueDate)})]})}),(0,r.jsx)("div",{className:"col-span-1 text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),m(e)},className:"px-2 py-1 text-sm text-gray-600 hover:text-green-600 hover:bg-green-50 rounded transition-all",title:"View Details",children:"Details"}),c(e)&&(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),g(e)},className:"px-2 py-1 text-sm text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded transition-all",title:"Edit Task",children:"Edit"}),u(e)&&(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),i(e._id)},className:"p-2 text-gray-400 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-all",title:"Delete",children:(0,r.jsx)(j.Z,{className:"w-4 h-4"})})]})})]})},e._id))})]}):(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-16 text-center",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(b,{className:"w-10 h-10 text-gray-400"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No tasks found"}),(0,r.jsx)("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:"Get started by creating your first task or adjust your filters to see existing tasks."}),(0,r.jsxs)("button",{onClick:()=>o(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-all shadow-sm hover:shadow-md font-medium inline-flex items-center gap-2",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),"Create Your First Task"]})]})}function k(e){let{columns:t,tasks:s,isOverdue:a,updateTaskStatus:l,router:i}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-4 overflow-x-auto pb-4",children:t.map(e=>{let t=s.filter(t=>t.status===e.status);return(0,r.jsxs)("div",{className:"min-w-[280px] lg:min-w-0",children:[(0,r.jsx)("div",{className:"".concat(e.color," border-2 rounded-lg p-3 mb-3 shadow-sm"),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 text-sm",children:e.title}),(0,r.jsx)("span",{className:"bg-white text-gray-700 text-xs font-bold px-2 py-1 rounded-full",children:t.length})]})}),(0,r.jsx)("div",{className:"space-y-3",children:0===t.length?(0,r.jsx)("div",{className:"bg-gray-50 border-2 border-dashed border-gray-200 rounded-lg p-6 text-center",children:(0,r.jsx)("p",{className:"text-xs text-gray-400 font-medium",children:"No tasks"})}):t.map(e=>(0,r.jsxs)("div",{onClick:()=>i.push("/tasks/".concat(e._id)),className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-lg hover:border-gray-300 transition-all cursor-pointer group",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 text-sm leading-tight flex-1 group-hover:text-blue-600 transition-colors",children:e.title}),a(e.dueDate)&&(0,r.jsx)(y.Z,{className:"w-4 h-4 text-rose-500 flex-shrink-0 ml-2"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2 leading-relaxed",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"inline-flex px-2.5 py-1 rounded-full text-xs font-semibold ".concat((0,d._$)(e.priority)),children:(0,d.uV)(e.priority)}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 text-xs ".concat(a(e.dueDate)?"text-rose-600 font-semibold":"text-gray-500"),children:[(0,r.jsx)(f.Z,{className:"w-3.5 h-3.5"}),(0,r.jsx)("span",{children:(0,d.p6)(e.dueDate)})]})]})]},e._id))})]},e.status)})})}function C(e){var t;let{onClose:s,onSuccess:l,projects:i}=e,[d,u]=(0,a.useState)(""),[m,g]=(0,a.useState)(""),[h,b]=(0,a.useState)((null===(t=i[0])||void 0===t?void 0:t._id)||""),[y,f]=(0,a.useState)(n.T8.MEDIUM),[j,v]=(0,a.useState)(n.hY.TODO),[N,w]=(0,a.useState)(""),[k,C]=(0,a.useState)(!1),T=async e=>{if(e.preventDefault(),!d.trim()||!N){c.Am.error("Please fill in all required fields");return}try{C(!0),await o.Z.createTask({title:d,description:m,projectId:h,priority:y,status:j,dueDate:N,tags:[],dependencies:[]}),c.Am.success("Task created successfully"),l()}catch(e){console.error(e),c.Am.error("Failed to create task")}finally{C(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 rounded-t-2xl",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Create New Task"}),(0,r.jsx)("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all",children:(0,r.jsx)(p.Z,{className:"w-5 h-5"})})]})}),(0,r.jsxs)("form",{onSubmit:T,className:"p-6 space-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Task Title ",(0,r.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",placeholder:"Enter task title...",value:d,onChange:e=>u(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),(0,r.jsx)("textarea",{placeholder:"Describe the task in detail...",value:m,onChange:e=>g(e.target.value),rows:4,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm resize-none"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Project"}),(0,r.jsx)("select",{value:h,onChange:e=>b(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm bg-white",children:(i||[]).map(e=>(0,r.jsx)("option",{value:e._id,children:e.title},e._id))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Due Date ",(0,r.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,r.jsx)("input",{type:"date",value:N,onChange:e=>w(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",required:!0})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Priority"}),(0,r.jsxs)("select",{value:y,onChange:e=>f(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm bg-white",children:[(0,r.jsx)("option",{value:"low",children:"Low"}),(0,r.jsx)("option",{value:"medium",children:"Medium"}),(0,r.jsx)("option",{value:"high",children:"High"}),(0,r.jsx)("option",{value:"urgent",children:"Urgent"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Initial Status"}),(0,r.jsxs)("select",{value:j,onChange:e=>v(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm bg-white",children:[(0,r.jsx)("option",{value:"todo",children:"To Do"}),(0,r.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,r.jsx)("option",{value:"review",children:"In Review"}),(0,r.jsx)("option",{value:"testing",children:"Testing"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"px-5 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all font-medium text-sm",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:k,className:"px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-medium text-sm shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),"Create Task"]})})]})]})]})})}function T(e){let{task:t,onClose:s}=e;return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 rounded-t-2xl flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Task Details"}),(0,r.jsx)("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all",children:(0,r.jsx)(p.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.title}),t.description&&(0,r.jsx)("p",{className:"text-gray-600 text-base mb-2 font-medium",children:t.description})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Due Date:"}),(0,r.jsx)("span",{className:"text-gray-900 font-medium",children:(0,d.p6)(t.dueDate)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Priority:"}),(0,r.jsx)("span",{className:"text-gray-900 font-medium",children:(0,d.uV)(t.priority)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Status:"}),(0,r.jsx)("span",{className:"text-gray-900 font-medium",children:(0,d.uV)(t.status)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Project:"}),(0,r.jsx)("span",{className:"text-gray-900 font-medium",children:"object"==typeof t.projectId?t.projectId.title:t.projectId})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Assigned To:"}),(0,r.jsx)("span",{className:"text-gray-900 font-medium",children:"object"==typeof t.assignedTo?"".concat(t.assignedTo.firstName," ").concat(t.assignedTo.lastName):t.assignedTo||"Unassigned"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Created By:"}),(0,r.jsx)("span",{className:"text-gray-900 font-medium",children:"object"==typeof t.createdBy?"".concat(t.createdBy.firstName," ").concat(t.createdBy.lastName):t.createdBy||"Unknown"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Created:"}),(0,r.jsx)("span",{className:"text-gray-900 font-medium",children:(0,d.p6)(t.createdAt)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Updated:"}),(0,r.jsx)("span",{className:"text-gray-900 font-medium",children:(0,d.p6)(t.updatedAt)})]}),t.tags&&t.tags.length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-1 pt-2",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Tags:"}),t.tags.map((e,t)=>(0,r.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded ml-2",children:e},t))]})]})]})]})})}function Z(e){let{task:t,onClose:s,onSuccess:l,projects:i}=e,[n,d]=(0,a.useState)(t.title),[x,u]=(0,a.useState)(t.description||""),[m,g]=(0,a.useState)("object"==typeof t.projectId?t.projectId._id:t.projectId||""),[h,b]=(0,a.useState)(t.priority),[y,f]=(0,a.useState)(t.status),[j,v]=(0,a.useState)(t.dueDate?t.dueDate.slice(0,10):""),[N,w]=(0,a.useState)(!1),k=async e=>{if(e.preventDefault(),!n.trim()||!j){c.Am.error("Please fill in all required fields");return}try{w(!0),await o.Z.updateTask(t._id,{title:n,description:x,projectId:m,priority:h,status:y,dueDate:j}),c.Am.success("Task updated successfully"),l()}catch(e){console.error(e),c.Am.error("Failed to update task")}finally{w(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 rounded-t-2xl flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Task"}),(0,r.jsx)("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all",children:(0,r.jsx)(p.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("form",{onSubmit:k,className:"p-6 space-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Task Title ",(0,r.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",value:n,onChange:e=>d(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm text-black",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),(0,r.jsx)("textarea",{value:x,onChange:e=>u(e.target.value),rows:4,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm resize-none text-black"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Project"}),(0,r.jsx)("select",{value:m,onChange:e=>g(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm bg-white text-black",children:(i||[]).map(e=>(0,r.jsx)("option",{value:e._id,children:e.title},e._id))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Due Date ",(0,r.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,r.jsx)("input",{type:"date",value:j,onChange:e=>v(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm text-black",required:!0})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Priority"}),(0,r.jsxs)("select",{value:h,onChange:e=>b(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm bg-white text-black",children:[(0,r.jsx)("option",{value:"low",children:"Low"}),(0,r.jsx)("option",{value:"medium",children:"Medium"}),(0,r.jsx)("option",{value:"high",children:"High"}),(0,r.jsx)("option",{value:"urgent",children:"Urgent"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),(0,r.jsxs)("select",{value:y,onChange:e=>f(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm bg-white text-black",children:[(0,r.jsx)("option",{value:"todo",children:"To Do"}),(0,r.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,r.jsx)("option",{value:"review",children:"In Review"}),(0,r.jsx)("option",{value:"testing",children:"Testing"}),(0,r.jsx)("option",{value:"completed",children:"Completed"}),(0,r.jsx)("option",{value:"blocked",children:"Blocked"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"px-5 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all font-medium text-sm",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:N,className:"px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-medium text-sm shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:N?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):(0,r.jsx)(r.Fragment,{children:"Save Changes"})})]})]})]})})}},6481:function(e,t,s){"use strict";var r,a,l,i,n,o,d,c,x,u;s.d(t,{Ig:function(){return a},T8:function(){return i},hY:function(){return n},kJ:function(){return l}}),(o=r||(r={})).ADMIN="admin",o.MANAGER="manager",o.TEAM_MEMBER="team_member",(d=a||(a={})).LOW="low",d.MEDIUM="medium",d.HIGH="high",d.CRITICAL="critical",(c=l||(l={})).PLANNING="planning",c.IN_PROGRESS="in_progress",c.TESTING="testing",c.COMPLETED="completed",c.ON_HOLD="on_hold",c.CANCELLED="cancelled",(x=i||(i={})).LOW="low",x.MEDIUM="medium",x.HIGH="high",x.URGENT="urgent",(u=n||(n={})).TODO="todo",u.IN_PROGRESS="in_progress",u.REVIEW="review",u.TESTING="testing",u.COMPLETED="completed",u.BLOCKED="blocked"}},function(e){e.O(0,[610,973,971,117,744],function(){return e(e.s=27970)}),_N_E=e.O()}]);