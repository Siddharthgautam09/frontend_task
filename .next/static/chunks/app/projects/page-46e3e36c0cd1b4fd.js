(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[895],{60160:function(e,t,s){Promise.resolve().then(s.bind(s,25883))},39763:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let s=(0,a.forwardRef)((s,n)=>{let{color:i="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:x="",children:u,...m}=s;return(0,a.createElement)("svg",{ref:n,...r,width:o,height:o,stroke:i,strokeWidth:c?24*Number(d)/Number(o):d,className:["lucide","lucide-".concat(l(e)),x].join(" "),...m},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(u)?u:[u]])});return s.displayName="".concat(e),s}},46221:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},31047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},97418:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]])},90740:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},56475:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]])},25466:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},47692:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},58293:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},99397:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},73247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},18930:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},92369:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},32489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(39763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},25883:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var a=s(57437),r=s(2265),l=s(71245),n=s(99376),i=s(6481),o=s(71837),d=s(93448),c=s(69064),x=s(99397),u=s(73247),m=s(90740);let h=(0,s(39763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var g=s(18930),p=s(31047),b=s(32489),y=s(77388);function f(){let{user:e,loading:t}=(0,l.a)(),s=(0,n.useRouter)(),[i,b]=(0,r.useState)([]),[f,w]=(0,r.useState)(!0),[k,C]=(0,r.useState)("");null==e||e._id;let[M,S]=(0,r.useState)(""),[Z,_]=(0,r.useState)(""),[P,A]=(0,r.useState)(!1),[E,H]=(0,r.useState)("all"),[I,T]=(0,r.useState)(null),[D,L]=(0,r.useState)(!1),[F,O]=(0,r.useState)(!1),V=e=>{T(e),L(!0)},U=e=>{T(e),O(!0)},z=()=>{O(!1),T(null)};(0,r.useEffect)(()=>{if(!t&&!e){s.replace("/login");return}e&&W()},[e,t,s]);let R=(null==e?void 0:e.role)==="admin",G=t=>!!e&&("admin"===e.role||"team_member"===e.role&&(Array.isArray(t.teamMembers)?t.teamMembers.map(e=>"string"==typeof e?e:e._id):[]).includes(e._id)),q=t=>!!e&&"admin"===e.role,B=t=>!!e&&("admin"===e.role||"team_member"===e.role&&(Array.isArray(t.teamMembers)?t.teamMembers.map(e=>"string"==typeof e?e:e._id):[]).includes(e._id)),W=async()=>{try{w(!0);let e={};k&&(e.search=k),M&&(e.status=M),Z&&(e.priority=Z);let t=await o.Z.getProjects(e);if(console.log("Projects API response:",t),t.success&&t.data){let e=t.data.projects||t.data.items||[];console.log("Projects data:",e),b(e)}else console.log("No projects data in response"),b([])}catch(e){console.error("Failed to load projects:",e),c.Am.error("Failed to load projects")}finally{w(!1)}},$=async e=>{if(confirm("Are you sure you want to delete this project? This action cannot be undone."))try{await o.Z.deleteProject(e),c.Am.success("Project deleted successfully"),W()}catch(e){console.error("Failed to delete project:",e),c.Am.error("Failed to delete project")}},J=async(e,t)=>{try{await o.Z.updateProject(e,{status:t}),c.Am.success("Project status updated successfully"),W()}catch(e){console.error("Failed to update project status:",e),c.Am.error("Failed to update project status")}},K=i.filter(e=>{if(!B(e))return!1;let t=e.title.toLowerCase().includes(k.toLowerCase())||e.description.toLowerCase().includes(k.toLowerCase()),s=!M||e.status===M,a=!Z||e.priority===Z;return t&&s&&a});return t||f?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e?(0,a.jsx)(y.Z,{children:(0,a.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 via-indigo-950 to-gray-900 min-h-screen",children:[(0,a.jsx)("header",{className:"bg-gradient-to-r from-slate-900 via-indigo-950 to-gray-900 shadow-lg border-b border-slate-800/60",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-20",children:[(0,a.jsx)("div",{className:"flex flex-col justify-center",children:(0,a.jsx)("h1",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-purple-400 to-blue-400 drop-shadow-lg tracking-tight",children:"Projects"})}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:R&&(0,a.jsxs)("button",{onClick:()=>A(!0),className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-2 rounded-xl shadow-md border border-indigo-400/30 flex items-center gap-2 font-bold hover:scale-105 transition-transform",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"New Project"})]})})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 ",children:[(0,a.jsx)("p",{className:"text-2xl text-slate-300 mt-1 mb-10 font-medium drop-shadow-sm",children:"admin"===e.role?"Manage your team projects":"View your assigned projects"}),(0,a.jsx)("div",{className:" rounded-lg p-6 mb-6 bg-gradient-to-r from-slate-900 via-indigo-950 to-gray-900 border-b border-slate-200",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 flex-1",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search projects...",value:k,onChange:e=>C(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-full"})]}),(0,a.jsxs)("select",{value:Z,onChange:e=>_(e.target.value),className:"pl-5 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 appearance-none bg-white relative",children:[(0,a.jsx)("option",{value:"",children:"All Priority"}),(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"}),(0,a.jsx)("option",{value:"critical",children:"Critical"})]})]}),(0,a.jsxs)("button",{onClick:W,className:"flex items-center space-x-2 px-4 py-2 text-slate-200 hover:text-gray-900 border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Refresh"})]})]})}),0===K.length?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center border border-gray-200",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(h,{className:"w-8 h-8 text-gray-400"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No projects found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:R?"Get started by creating your first project.":"No projects match your current filters."}),R&&(0,a.jsx)("button",{onClick:()=>A(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Project"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:K.map(e=>{var t;return(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-7 hover:shadow-xl transition-all duration-200 hover:-translate-y-1 flex flex-col justify-between min-h-[340px]",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2 tracking-tight",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[G(e)?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:e.status,onChange:t=>J(e._id,t.target.value),className:"px-3 pr-8 py-1.5 rounded-full text-xs font-semibold border-0 focus:ring-2 focus:ring-blue-500 transition-all appearance-none ".concat((0,d.z2)(e.status)),title:"Update project status",children:[(0,a.jsx)("option",{value:"planning",children:"Planning"}),(0,a.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,a.jsx)("option",{value:"testing",children:"Testing"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"on_hold",children:"On Hold"})]}),(0,a.jsx)("svg",{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{d:"M7 8l3 3 3-3"})})]}):(0,a.jsx)("span",{className:"px-3 py-1.5 rounded-full text-xs font-semibold ".concat((0,d.z2)(e.status)),children:(0,d.uV)(e.status)}),(0,a.jsx)("span",{className:"px-3 py-1.5 rounded-full text-xs font-bold ".concat((0,d._$)(e.priority)," text-gray-800 ml-1"),children:(0,d.uV)(e.priority)})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>V(e),className:"px-2 py-1 text-sm text-gray-600 hover:text-green-600 hover:bg-green-50 rounded transition-all",title:"View Details",children:"Details"}),G(e)&&(0,a.jsx)("button",{onClick:()=>U(e),className:"px-2 py-1 text-sm text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded transition-all",title:"Edit Project",children:"Edit"}),q(e)&&(0,a.jsx)("button",{onClick:()=>$(e._id),className:"p-1 text-gray-400 hover:text-red-600",title:"Delete Project",children:(0,a.jsx)(g.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("p",{className:"text-gray-600 text-base mb-4 line-clamp-3 font-medium",children:e.description}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Deadline:"})]}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:(0,d.p6)(e.deadline)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(h,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Team:"})]}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:[(null===(t=e.teamMembers)||void 0===t?void 0:t.length)||0," members"]})]}),e.estimatedHours&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-gray-600",children:[(0,a.jsx)("span",{children:"Estimated Hours:"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:[e.estimatedHours,"h"]})]}),e.actualHours&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-gray-600",children:[(0,a.jsx)("span",{children:"Actual Hours:"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:[e.actualHours,"h"]})]})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"space-y-1 text-xs text-gray-500",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Manager:"}),(0,a.jsx)("span",{className:"font-medium",children:"object"==typeof e.managerId?"".concat(e.managerId.firstName," ").concat(e.managerId.lastName):"Unknown"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Created:"}),(0,a.jsx)("span",{children:(0,d.p6)(e.createdAt)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Updated:"}),(0,a.jsx)("span",{children:(0,d.p6)(e.updatedAt)})]})]}),e.tags&&e.tags.length>0&&(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap gap-1",children:[e.tags.slice(0,3).map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:e},t)),e.tags.length>3&&(0,a.jsxs)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:["+",e.tags.length-3]})]})]})]},e._id)})})]}),P&&(0,a.jsx)(j,{onClose:()=>A(!1),onSuccess:()=>{A(!1),W()}}),D&&I&&(0,a.jsx)(v,{project:I,onClose:()=>{L(!1),T(null)}}),F&&I&&(0,a.jsx)(N,{project:I,onClose:z,onSuccess:()=>{z(),W()}})]})}):null}function j(e){let{onClose:t,onSuccess:s}=e,[n,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[p,y]=(0,r.useState)(i.Ig.MEDIUM),[f,j]=(0,r.useState)(i.kJ.PLANNING),[v,N]=(0,r.useState)(""),[w,k]=(0,r.useState)(""),[C,M]=(0,r.useState)(!1),[S,Z]=(0,r.useState)([]),[_,P]=(0,r.useState)([]),{user:A}=(0,l.a)(),E=(null==A?void 0:A._id)||"";(0,r.useEffect)(()=>{(async()=>{try{let e=await o.Z.getUsers();e.success&&e.data&&Z(e.data)}catch(e){c.Am.error("Failed to load users")}})()},[]);let H=async e=>{if(e.preventDefault(),!n.trim()||!h){c.Am.error("Please fill in all required fields");return}try{M(!0),await o.Z.createProject({title:n,description:u,deadline:h,priority:p,status:f,managerId:E,teamMembers:_,estimatedHours:v?parseFloat(v):void 0,tags:w.split(",").map(e=>e.trim()).filter(Boolean)}),c.Am.success("Project created successfully"),s()}catch(e){var t,a;console.error(e),c.Am.error((null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to create project")}finally{M(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-3xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 rounded-t-2xl",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Create New Project"}),(0,a.jsx)("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all",children:(0,a.jsx)(b.Z,{className:"w-5 h-5"})})]})}),(0,a.jsxs)("form",{onSubmit:H,className:"p-6 space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Project Title ",(0,a.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",placeholder:"Enter project title...",value:n,onChange:e=>d(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm text-black",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),(0,a.jsx)("textarea",{placeholder:"Describe the project in detail...",value:u,onChange:e=>m(e.target.value),rows:4,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm resize-none text-black"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Deadline ",(0,a.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,a.jsx)("input",{type:"date",value:h,onChange:e=>g(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm text-black",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Priority"}),(0,a.jsxs)("select",{value:p,onChange:e=>y(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm bg-white text-black",children:[(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"}),(0,a.jsx)("option",{value:"critical",children:"Critical"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Initial Status"}),(0,a.jsxs)("select",{value:f,onChange:e=>j(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm bg-white text-black",children:[(0,a.jsx)("option",{value:"planning",children:"Planning"}),(0,a.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,a.jsx)("option",{value:"testing",children:"Testing"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"on_hold",children:"On Hold"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tags"}),(0,a.jsx)("input",{type:"text",placeholder:"Enter tags separated by commas...",value:w,onChange:e=>k(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm text-black"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Assign Team Members"}),(0,a.jsxs)("div",{className:"max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2",children:[S.filter(e=>"admin"!==e.role).map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",value:e._id,checked:_.includes(e._id),onChange:t=>{t.target.checked?P([..._,e._id]):P(_.filter(t=>t!==e._id))},className:"text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:[e.firstName," ",e.lastName," (",e.email,")"]})]},e._id)),0===S.filter(e=>"admin"!==e.role).length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 p-2",children:"No team members available"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"px-5 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all font-medium text-sm",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:C,className:"px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-medium text-sm shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Create Project"]})})]})]})]})})}function v(e){var t;let{project:s,onClose:r}=e;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 rounded-t-2xl flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Project Details"}),(0,a.jsx)("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all",children:(0,a.jsx)(b.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.title}),s.description&&(0,a.jsx)("p",{className:"text-gray-600 text-base mb-2 font-medium",children:s.description})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Deadline:"}),(0,a.jsx)("span",{className:"text-gray-900 font-medium",children:(0,d.p6)(s.deadline)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Team:"}),(0,a.jsxs)("span",{className:"text-gray-900 font-medium",children:[(null===(t=s.teamMembers)||void 0===t?void 0:t.length)||0," members"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Priority:"}),(0,a.jsx)("span",{className:"text-gray-900 font-medium",children:(0,d.uV)(s.priority)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Status:"}),(0,a.jsx)("span",{className:"text-gray-900 font-medium",children:(0,d.uV)(s.status)})]}),s.estimatedHours&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Estimated Hours:"}),(0,a.jsxs)("span",{className:"text-gray-900 font-medium",children:[s.estimatedHours,"h"]})]}),s.actualHours&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Actual Hours:"}),(0,a.jsxs)("span",{className:"text-gray-900 font-medium",children:[s.actualHours,"h"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Manager:"}),(0,a.jsx)("span",{className:"text-gray-900 font-medium",children:"object"==typeof s.managerId?"".concat(s.managerId.firstName," ").concat(s.managerId.lastName):"Unknown"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Created:"}),(0,a.jsx)("span",{className:"text-gray-900 font-medium",children:(0,d.p6)(s.createdAt)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Updated:"}),(0,a.jsx)("span",{className:"text-gray-900 font-medium",children:(0,d.p6)(s.updatedAt)})]}),s.tags&&s.tags.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 pt-2",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Tags:"}),s.tags.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded ml-2",children:e},t))]})]})]})]})})}function N(e){let{project:t,onClose:s,onSuccess:n}=e,[i,d]=(0,r.useState)(t.title),[x,u]=(0,r.useState)(t.description||""),[m,h]=(0,r.useState)(t.deadline?t.deadline.slice(0,10):""),[g,p]=(0,r.useState)(t.priority),[y,f]=(0,r.useState)(t.status),[j,v]=(0,r.useState)(t.estimatedHours?String(t.estimatedHours):""),[N,w]=(0,r.useState)(t.tags?t.tags.join(", "):""),[k,C]=(0,r.useState)(!1),[M,S]=(0,r.useState)([]),[Z,_]=(0,r.useState)(Array.isArray(t.teamMembers)?t.teamMembers.map(e=>"string"==typeof e?e:e._id):[]),{user:P}=(0,l.a)();(0,r.useEffect)(()=>{(async()=>{try{let e=await o.Z.getUsers();e.success&&e.data&&S(e.data)}catch(e){c.Am.error("Failed to load users")}})()},[]);let A=async e=>{if(e.preventDefault(),!i.trim()||!m){c.Am.error("Please fill in all required fields");return}try{C(!0),await o.Z.updateProject(t._id,{title:i,description:x,deadline:m,priority:g,status:y,teamMembers:Z,estimatedHours:j?parseFloat(j):void 0,tags:N.split(",").map(e=>e.trim()).filter(Boolean)}),c.Am.success("Project updated successfully"),n()}catch(e){var s,a;console.error(e),c.Am.error((null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to update project")}finally{C(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-3xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 rounded-t-2xl flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Project"}),(0,a.jsx)("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all",children:(0,a.jsx)(b.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("form",{onSubmit:A,className:"p-6 space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Project Title ",(0,a.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:i,onChange:e=>d(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm text-black",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),(0,a.jsx)("textarea",{value:x,onChange:e=>u(e.target.value),rows:4,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm resize-none text-black"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Deadline ",(0,a.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,a.jsx)("input",{type:"date",value:m,onChange:e=>h(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm text-black",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Priority"}),(0,a.jsxs)("select",{value:g,onChange:e=>p(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm bg-white text-black",children:[(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"}),(0,a.jsx)("option",{value:"critical",children:"Critical"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),(0,a.jsxs)("select",{value:y,onChange:e=>f(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm bg-white text-black",children:[(0,a.jsx)("option",{value:"planning",children:"Planning"}),(0,a.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,a.jsx)("option",{value:"testing",children:"Testing"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"on_hold",children:"On Hold"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Estimated Hours"}),(0,a.jsx)("input",{type:"number",value:j,onChange:e=>v(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm text-black",placeholder:"e.g., 40"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tags"}),(0,a.jsx)("input",{type:"text",value:N,onChange:e=>w(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm text-black",placeholder:"Enter tags separated by commas..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Assign Team Members"}),(0,a.jsxs)("div",{className:"max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2",children:[M.filter(e=>"admin"!==e.role).map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",value:e._id,checked:Z.includes(e._id),onChange:t=>{t.target.checked?_([...Z,e._id]):_(Z.filter(t=>t!==e._id))},className:"text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:[e.firstName," ",e.lastName," (",e.email,")"]})]},e._id)),0===M.filter(e=>"admin"!==e.role).length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 p-2",children:"No team members available"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"px-5 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all font-medium text-sm",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:k,className:"px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-medium text-sm shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:k?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):(0,a.jsx)(a.Fragment,{children:"Save Changes"})})]})]})]})})}},6481:function(e,t,s){"use strict";var a,r,l,n,i,o,d,c,x,u;s.d(t,{Ig:function(){return r},T8:function(){return n},hY:function(){return i},kJ:function(){return l}}),(o=a||(a={})).ADMIN="admin",o.MANAGER="manager",o.TEAM_MEMBER="team_member",(d=r||(r={})).LOW="low",d.MEDIUM="medium",d.HIGH="high",d.CRITICAL="critical",(c=l||(l={})).PLANNING="planning",c.IN_PROGRESS="in_progress",c.TESTING="testing",c.COMPLETED="completed",c.ON_HOLD="on_hold",c.CANCELLED="cancelled",(x=n||(n={})).LOW="low",x.MEDIUM="medium",x.HIGH="high",x.URGENT="urgent",(u=i||(i={})).TODO="todo",u.IN_PROGRESS="in_progress",u.REVIEW="review",u.TESTING="testing",u.COMPLETED="completed",u.BLOCKED="blocked"}},function(e){e.O(0,[610,973,971,117,744],function(){return e(e.s=60160)}),_N_E=e.O()}]);